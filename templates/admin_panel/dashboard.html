{% extends 'base.html' %}

{% block content %}
<div class="admin-dashboard">
    <h2 class="text-warning mb-4">üëë –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h2>
    
    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <div class="row mb-4">
        <div class="col-md-3">
            <div class="card stat-card bg-dark text-white">
                <div class="card-body text-center">
                    <h3>{{ users.count }}</h3>
                    <p>üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card stat-card bg-dark text-white">
                <div class="card-body text-center">
                    <h3>{{ computers.count }}</h3>
                    <p>üíª –ö–æ–º–ø—å—é—Ç–µ—Ä–æ–≤</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card stat-card bg-dark text-white">
                <div class="card-body text-center">
                    <h3>{{ requests.count }}</h3>
                    <p>üì® –ù–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card stat-card bg-dark text-white">
                <div class="card-body text-center">
                    <h3>{{ intern_tasks.count }}</h3>
                    <p>üìã –ó–∞–¥–∞–Ω–∏–π —Å—Ç–∞–∂—ë—Ä–∞–º</p>
                </div>
            </div>
        </div>
    </div>

    <!-- –ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏ -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card custom-card">
                <div class="card-header">
                    <h5 class="text-warning">üöÄ –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø</h5>
                </div>
                <div class="card-body">
                    <div class="d-flex flex-wrap gap-2">
                        <a href="{% url 'admin_users' %}" class="btn btn-outline-warning">üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</a>
                        <a href="{% url 'admin_computers' %}" class="btn btn-outline-warning">üíª –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞–º–∏</a>
                        <a href="{% url 'admin_news' %}" class="btn btn-outline-warning">üì¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç—è–º–∏</a>
                        <a href="{% url 'admin_tariffs' %}" class="btn btn-outline-warning">üí∞ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–∞–º–∏</a>
                        <a href="{% url 'admin_interns' %}" class="btn btn-outline-warning">üéØ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Å—Ç–∞–∂—ë—Ä–∞–º–∏</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ù–æ–≤—ã–µ –∑–∞—è–≤–∫–∏ -->
    {% if requests %}
    <div class="row">
        <div class="col-md-6">
            <div class="card custom-card">
                <div class="card-header">
                    <h5 class="text-warning">üì® –ù–æ–≤—ã–µ –∑–∞—è–≤–∫–∏ –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä—ã</h5>
                </div>
                <div class="card-body">
                    {% for req in requests %}
                    <div class="request-item mb-3 p-3 border-bottom">
                        <div class="d-flex justify-content-between">
                            <div>
                                <strong class="text-white">{{ req.user.username }}</strong>
                                <span class="text-muted">–∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç</span>
                                <strong class="text-warning">{{ req.computer.name }}</strong>
                            </div>
                            <form method="post" action="{% url 'process_request' req.id %}">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-success btn-sm">‚úÖ –û–±—Ä–∞–±–æ—Ç–∞—Ç—å</button>
                            </form>
                        </div>
                        {% if req.message %}
                        <p class="text-light mt-2"><small>{{ req.message }}</small></p>
                        {% endif %}
                        <small class="text-muted">{{ req.created_at|timesince }} –Ω–∞–∑–∞–¥</small>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è -->
        <div class="col-md-6">
            <div class="card custom-card">
                <div class="card-header">
                    <h5 class="text-warning">üìä –ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è</h5>
                </div>
                <div class="card-body">
                    <div class="activity-item mb-2">
                        <span class="text-success">‚úì</span>
                        <span class="text-white">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>
                        <small class="text-muted">5 –º–∏–Ω –Ω–∞–∑–∞–¥</small>
                    </div>
                    <div class="activity-item mb-2">
                        <span class="text-warning">‚ö°</span>
                        <span class="text-white">–î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä</span>
                        <small class="text-muted">1 —á–∞—Å –Ω–∞–∑–∞–¥</small>
                    </div>
                    <div class="activity-item mb-2">
                        <span class="text-info">üì¢</span>
                        <span class="text-white">–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–∞ –Ω–æ–≤–æ—Å—Ç—å</span>
                        <small class="text-muted">2 —á–∞—Å–∞ –Ω–∞–∑–∞–¥</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}