{% extends 'base.html' %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="text-warning">üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h2>
</div>

<div class="card custom-card">
    <div class="card-header">
        <h5 class="text-warning">–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h5>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-dark table-hover">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>–õ–æ–≥–∏–Ω</th>
                        <th>Email</th>
                        <th>–†–æ–ª—å</th>
                        <th>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</th>
                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody>
                    {% for user in users %}
                    <tr>
                        <td>{{ user.id }}</td>
                        <td class="text-white">{{ user.username }}</td>
                        <td>{{ user.email|default:"–ù–µ —É–∫–∞–∑–∞–Ω" }}</td>
                        <td>
                            <form method="post" class="d-inline">
                                {% csrf_token %}
                                <input type="hidden" name="user_id" value="{{ user.id }}">
                                <select name="role" class="form-select form-select-sm" onchange="this.form.submit()">
                                    <option value="user" {% if user.userprofile.role == 'user' %}selected{% endif %}>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</option>
                                    <option value="intern" {% if user.userprofile.role == 'intern' %}selected{% endif %}>–°—Ç–∞–∂—ë—Ä</option>
                                    <option value="admin" {% if user.userprofile.role == 'admin' %}selected{% endif %}>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
                                </select>
                            </form>
                        </td>
                        <td class="text-muted">{{ user.date_joined|date:"d.m.Y" }}</td>
                        <td>
                            <button class="btn btn-sm btn-outline-warning">–ü—Ä–æ—Å–º–æ—Ç—Ä</button>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-md-4">
        <div class="card custom-card">
            <div class="card-header">
                <h6 class="text-warning">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ä–æ–ª—è–º</h6>
            </div>
            <div class="card-body">
                <div class="role-stats">
                    <div class="mb-2">
                        <span class="text-white">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã:</span>
                        <span class="badge bg-warning float-end">{{ admin_count|default:"0" }}</span>
                    </div>
                    <div class="mb-2">
                        <span class="text-white">–°—Ç–∞–∂—ë—Ä—ã:</span>
                        <span class="badge bg-info float-end">{{ intern_count|default:"0" }}</span>
                    </div>
                    <div class="mb-2">
                        <span class="text-white">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:</span>
                        <span class="badge bg-secondary float-end">{{ user_count|default:"0" }}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}